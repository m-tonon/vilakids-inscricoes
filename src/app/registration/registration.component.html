<div class="registration-container">
    <nb-card>
        <nb-card-header class="text-center">
            <h2>Camp Registration Form</h2>
        </nb-card-header>
        <nb-card-body>
            <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
                <nb-form-field>
                    <label>First Name *</label>
                    <input nbInput fullWidth formControlName="firstName" placeholder="Enter first name">
                    <ng-container *ngIf="registrationForm.get('firstName')?.touched">
                        <p class="error" *ngIf="registrationForm.get('firstName')?.errors?.['required']">
                            First name is required
                        </p>
                    </ng-container>
                </nb-form-field>

                <nb-form-field>
                    <label>Last Name *</label>
                    <input nbInput fullWidth formControlName="lastName" placeholder="Enter last name">
                    <ng-container *ngIf="registrationForm.get('lastName')?.touched">
                        <p class="error" *ngIf="registrationForm.get('lastName')?.errors?.['required']">
                            Last name is required
                        </p>
                    </ng-container>
                </nb-form-field>

                <nb-form-field>
                    <label>Email *</label>
                    <input nbInput fullWidth formControlName="email" type="email" placeholder="Enter email">
                    <ng-container *ngIf="registrationForm.get('email')?.touched">
                        <p class="error" *ngIf="registrationForm.get('email')?.errors?.['required']">
                            Email is required
                        </p>
                        <p class="error" *ngIf="registrationForm.get('email')?.errors?.['email']">
                            Please enter a valid email address
                        </p>
                    </ng-container>
                </nb-form-field>

                <nb-form-field>
                    <label>Birth Date *</label>
                    <input nbInput fullWidth formControlName="birthDate" [nbDatepicker]="birthDatePicker">
                    <nb-datepicker #birthDatePicker></nb-datepicker>
                    <ng-container *ngIf="registrationForm.get('birthDate')?.touched">
                        <p class="error" *ngIf="registrationForm.get('birthDate')?.errors?.['required']">
                            Birth date is required
                        </p>
                    </ng-container>
                </nb-form-field>

                <nb-form-field>
                    <label>Phone Number *</label>
                    <input nbInput fullWidth formControlName="phoneNumber" type="tel" placeholder="Enter phone number">
                    <ng-container *ngIf="registrationForm.get('phoneNumber')?.touched">
                        <p class="error" *ngIf="registrationForm.get('phoneNumber')?.errors?.['required']">
                            Phone number is required
                        </p>
                    </ng-container>
                </nb-form-field>

                <nb-form-field>
                    <label>Camp Session *</label>
                    <nb-select fullWidth formControlName="campSession" placeholder="Select session">
                        <nb-option [value]="session.id" *ngFor="let session of campSessions">
                            {{session.name}}
                        </nb-option>
                    </nb-select>
                    <ng-container *ngIf="registrationForm.get('campSession')?.touched">
                        <p class="error" *ngIf="registrationForm.get('campSession')?.errors?.['required']">
                            Please select a camp session
                        </p>
                    </ng-container>
                </nb-form-field>

                <nb-form-field>
                    <label>Special Needs</label>
                    <textarea nbInput fullWidth formControlName="specialNeeds" placeholder="Enter any special needs"></textarea>
                </nb-form-field>

                <div formGroupName="emergencyContact" class="emergency-contact">
                    <h3>Emergency Contact</h3>
                    <nb-form-field>
                        <label>Name *</label>
                        <input nbInput fullWidth formControlName="name" placeholder="Enter contact name">
                        <ng-container *ngIf="registrationForm.get('emergencyContact.name')?.touched">
                            <p class="error" *ngIf="registrationForm.get('emergencyContact.name')?.errors?.['required']">
                                Emergency contact name is required
                            </p>
                        </ng-container>
                    </nb-form-field>

                    <nb-form-field>
                        <label>Phone *</label>
                        <input nbInput fullWidth formControlName="phone" type="tel" placeholder="Enter contact phone">
                        <ng-container *ngIf="registrationForm.get('emergencyContact.phone')?.touched">
                            <p class="error" *ngIf="registrationForm.get('emergencyContact.phone')?.errors?.['required']">
                                Emergency contact phone is required
                            </p>
                        </ng-container>
                    </nb-form-field>

                    <nb-form-field>
                        <label>Relation *</label>
                        <input nbInput fullWidth formControlName="relation" placeholder="Enter relation to camper">
                        <ng-container *ngIf="registrationForm.get('emergencyContact.relation')?.touched">
                            <p class="error" *ngIf="registrationForm.get('emergencyContact.relation')?.errors?.['required']">
                                Relation to camper is required
                            </p>
                        </ng-container>
                    </nb-form-field>
                </div>

                <button nbButton status="primary" type="submit" [disabled]="!registrationForm.valid">
                    Submit Registration
                </button>
            </form>
        </nb-card-body>
    </nb-card>
</div>
