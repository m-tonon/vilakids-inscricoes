<div class="container">
  <nb-card>
    <nb-card-body>
      <label class="search-label" for="search">Search:</label>
      <input
        nbInput
        [nbFilterInput]="dataSource"
        id="search"
        class="search-input"
      />

      <table
        [nbTreeGrid]="dataSource"
        [nbSort]="dataSource"
        (sort)="updateSort($event)"
      >
        <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
        <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>

        <ng-container [nbTreeGridColumnDef]="customColumn">
          <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(customColumn)" *nbTreeGridHeaderCellDef>
            {{ columnDisplayNames[customColumn] }}
          </th>
          <td nbTreeGridCell *nbTreeGridCellDef="let row">
            <nb-tree-grid-row-toggle [expanded]="row.expanded"></nb-tree-grid-row-toggle>
            {{ row.data[customColumn] }}
          </td>
        </ng-container>

        @for (column of displayedColumns; track column; let i = $index) {
          <ng-container [nbTreeGridColumnDef]="column" [showOn]="getShowOn(i)">
            <th nbTreeGridHeaderCell [nbSortHeader]="getSortDirection(column)" *nbTreeGridHeaderCellDef>
              {{ columnDisplayNames[column] }}
            </th>
            <td nbTreeGridCell *nbTreeGridCellDef="let row">
              {{ row.data[column] || '-' }}
            </td>
          </ng-container>
        }
      </table>

      <ng-template #details>
        <td [attr.colspan]="allColumns.length"></td>
        @if (selectedRegistration) {

        }
      </ng-template>
    </nb-card-body>
  </nb-card>
</div>
